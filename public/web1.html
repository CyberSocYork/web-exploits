<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<link rel="stylesheet" type="text/css" href="styles.css" />
		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
		<link
			href="https://fonts.googleapis.com/css2?family=Cabin:wght@400;700&display=swap"
			rel="stylesheet"
		/>
		<title>CyberSoc Ping Utility</title>
	</head>
	<body>
		<h1>CyberSoc Ping Utility</h1>
		<p>Welcome to the CyberSoc Ping Utility (CPU for short)!</p>
		<p>
			You can use this tool to enter an IP address of your choice, and our
			service will ping it for you, free of charge. Very useful for
			checking if your favourite websites are up and running!
		</p>

		<form id="ping-form">
			<label for="ipaddress">IP Address</label>
			<input
				type="text"
				name="ipaddress"
				placeholder="0.0.0.0"
				autocomplete="off"
			/>
			<button type="submit">Submit</button>
		</form>
		<p id="apiResponse"></p>
		<script>
			function handleSubmit(e) {
				e.preventDefault();

				const responseText = document.getElementById("apiResponse");
				const formData = new FormData(e.target);

				fetch("/api", {
					method: "post",
					headers: {
						"Content-Type":
							"application/x-www-form-urlencoded;charset=UTF-8",
					},
					body: new URLSearchParams(formData).toString(),
				})
					.then((res) => res.text())
					.then((res) => (responseText.innerHTML = res));

				return false; // prevents default form behaviour
			}

			const loginForm = document.getElementById("ping-form");
			loginForm.addEventListener("submit", handleSubmit);
		</script>
	</body>
</html>
