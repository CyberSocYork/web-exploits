<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<link rel="stylesheet" type="text/css" href="styles.css" />
		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
		<link
			href="https://fonts.googleapis.com/css2?family=Cabin:wght@400;700&display=swap"
			rel="stylesheet"
		/>
		<title>Guess the key!</title>
	</head>
	<body>
		<h1>Guess the Key!</h1>
		<p>
			Try and guess the key!
		</p>

		<form id="ping-form">
			<label for="key">Key</label>
			<input
				type="text"
				name="key"
				placeholder="Key"
				autocomplete="off"
			/>
			<button type="submit">Submit</button>
		</form>
		<p id="apiResponse"></p>
		<script>
			function handleSubmit(e) {
				e.preventDefault();

				const responseText = document.getElementById("apiResponse");
				const formData = new FormData(e.target);

				fetch("./api3", {
					method: "post",
					headers: {
						"Content-Type":
							"application/x-www-form-urlencoded;charset=UTF-8",
					},
					body: new URLSearchParams(formData).toString(),
				})
					.then((res) => res.text())
					.then((res) => (responseText.innerHTML = res));

				return false; // prevents default form behaviour
			}

			const loginForm = document.getElementById("ping-form");
			loginForm.addEventListener("submit", handleSubmit);
		</script>
	</body>
</html>
